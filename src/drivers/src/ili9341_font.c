#include "../inc/ili9341_font.h"

uint8_t apple_font[64][8] = {
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, //"   "
    {0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x01}, //" ! "
    {0x00, 0x00, 0x05, 0x05, 0x05, 0x00, 0x00, 0x00}, //" " "
    {0x00, 0x0a, 0x0a, 0x1f, 0x0a, 0x1f, 0x0a, 0x0a}, //" # "
    {0x00, 0x04, 0x1e, 0x05, 0x0e, 0x14, 0x0f, 0x04}, // “ $ ”
    {0x00, 0x03, 0x13, 0x08, 0x04, 0x02, 0x19, 0x18}, // “ % ”
    {0x00, 0x02, 0x05, 0x05, 0x02, 0x15, 0x09, 0x16}, // “ & ”
    {0x00, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00}, // “ ' ”
    {0x00, 0x04, 0x02, 0x01, 0x01, 0x01, 0x02, 0x04}, // “ ( ”
    {0x00, 0x04, 0x08, 0x10, 0x10, 0x10, 0x08, 0x04}, // “ ) ”
    {0x00, 0x04, 0x15, 0x0e, 0x04, 0x0e, 0x15, 0x04}, // “ * ”
    {0x00, 0x00, 0x04, 0x04, 0x1f, 0x04, 0x04, 0x00}, // “ + ”
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x02}, // “ , ”
    {0x00, 0x00, 0x00, 0x00, 0x1f, 0x00, 0x00, 0x00}, // “ - ”
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04}, // “ . ”
    {0x00, 0x00, 0x10, 0x08, 0x04, 0x02, 0x01, 0x00}, // “ / ”
    {0x00, 0x0e, 0x11, 0x19, 0x15, 0x13, 0x11, 0x0e}, // “ 0 ”
    {0x00, 0x04, 0x06, 0x04, 0x04, 0x04, 0x04, 0x0e}, // “ 1 ”
    {0x00, 0x0e, 0x11, 0x10, 0x0c, 0x02, 0x01, 0x1f}, // “ 2 ”
    {0x00, 0x1f, 0x10, 0x08, 0x0c, 0x10, 0x11, 0x0e}, // “ 3 ”
    {0x00, 0x08, 0x0c, 0x0a, 0x09, 0x1f, 0x08, 0x08}, // “ 4 ”
    {0x00, 0x1f, 0x01, 0x0f, 0x10, 0x10, 0x11, 0x0e}, // “ 5 ”
    {0x00, 0x1c, 0x02, 0x01, 0x0f, 0x11, 0x11, 0x0e}, // “ 6 ”
    {0x00, 0x1f, 0x10, 0x08, 0x04, 0x02, 0x02, 0x02}, // “ 7 ”
    {0x00, 0x0e, 0x11, 0x11, 0x0e, 0x11, 0x11, 0x0e}, // “ 8 ”
    {0x00, 0x0e, 0x11, 0x11, 0x1e, 0x10, 0x08, 0x07}, // “ 9 ”
    {0x00, 0x00, 0x00, 0x04, 0x00, 0x04, 0x00, 0x00}, // “ : ”
    {0x00, 0x00, 0x00, 0x04, 0x00, 0x04, 0x04, 0x02}, // “ ; ”
    {0x00, 0x08, 0x04, 0x02, 0x01, 0x02, 0x04, 0x08}, // “ < ”
    {0x00, 0x00, 0x00, 0x1f, 0x00, 0x1f, 0x00, 0x00}, // “ = ”
    {0x00, 0x02, 0x04, 0x08, 0x10, 0x08, 0x04, 0x02}, // “ > ”
    {0x00, 0x0e, 0x11, 0x08, 0x04, 0x04, 0x00, 0x04}, // “ ? ”
    {0x00, 0x0e, 0x11, 0x15, 0x1d, 0x0d, 0x01, 0x0e}, // " @ "
    {0x00, 0x04, 0x0a, 0x11, 0x11, 0x1f, 0x11, 0x11}, //" A "
    {0x00, 0x0f, 0x11, 0x11, 0x0f, 0x11, 0x11, 0x0f}, //" B "
    {0x00, 0x0e, 0x11, 0x01, 0x01, 0x01, 0x11, 0x0e}, //" C "
    {0x00, 0x0f, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0f}, //" D "
    {0x00, 0x1f, 0x01, 0x01, 0x0f, 0x01, 0x01, 0x1f}, //" E "
    {0x00, 0x1f, 0x01, 0x01, 0x0f, 0x01, 0x01, 0x01}, //" F "
    {0x00, 0x1e, 0x01, 0x01, 0x01, 0x19, 0x11, 0x1e}, //" G "
    {0x00, 0x11, 0x11, 0x11, 0x1f, 0x11, 0x11, 0x11}, //" H "
    {0x00, 0x0e, 0x04, 0x04, 0x04, 0x04, 0x04, 0x0e}, //" I "
    {0x00, 0x10, 0x10, 0x10, 0x10, 0x10, 0x11, 0x0e}, //" J "
    {0x00, 0x11, 0x09, 0x05, 0x03, 0x05, 0x09, 0x11}, //" K "
    {0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x1f}, //" L "
    {0x00, 0x11, 0x1b, 0x15, 0x15, 0x11, 0x11, 0x11}, //" M "
    {0x00, 0x11, 0x11, 0x13, 0x15, 0x19, 0x11, 0x11}, //" N "
    {0x00, 0x0e, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0e}, //" O "
    {0x00, 0x0e, 0x11, 0x11, 0x0f, 0x01, 0x01, 0x01}, //" P "
    {0x00, 0x0e, 0x11, 0x11, 0x11, 0x15, 0x09, 0x16}, //" Q "
    {0x00, 0x0f, 0x11, 0x11, 0x0f, 0x05, 0x09, 0x11}, //" R "
    {0x00, 0x0e, 0x11, 0x01, 0x0e, 0x10, 0x11, 0x0e}, //" S "
    {0x00, 0x1f, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04}, //" T "
    {0x00, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0e}, //" U "
    {0x00, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0a, 0x04}, //" V "
    {0x00, 0x11, 0x11, 0x11, 0x15, 0x15, 0x1b, 0x11}, //" W "
    {0x00, 0x11, 0x11, 0x0a, 0x04, 0x0a, 0x11, 0x11}, //" X "
    {0x00, 0x11, 0x11, 0x0a, 0x04, 0x04, 0x04, 0x04}, //" Y "
    {0x00, 0x1f, 0x10, 0x08, 0x04, 0x02, 0x01, 0x1f}, //" Z "
    {0x00, 0x1f, 0x03, 0x03, 0x03, 0x03, 0x03, 0x1f}, //" [ "
    {0x00, 0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x00}, //" \ "
    {0x00, 0x1f, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1f}, //" ] "
    {0x00, 0x00, 0x00, 0x04, 0x0a, 0x11, 0x00, 0x00}, //" ^ "
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f}, //" _ "
};

void il_draw_char(uint16_t x, uint16_t y, uint8_t c, uint16_t f_color, uint16_t bg_color)
{
    il_set_address_window(x, y, x + FONT_W - 1, y + FONT_H - 1);
    for (int i = 8; i > 0; i--)
    {
        uint8_t current = apple_font[c - ' '][i];
        CS_LOCK(
            for (int j = 0; j < 5; j++) {
                if (current & 0x01)
                {
                    _il_write_data_16bit(f_color);
                }
                else
                {
                    _il_write_data_16bit(bg_color);
                }
                current >>= 1;
            })
    }
}

void il_draw_string(uint16_t x, uint16_t y, char *str, uint16_t f_color, uint16_t bg_color)
{
    uint16_t len = strlen(str);
    for (uint16_t i = 0; i < len; i++)
    {
        il_draw_char(x + (i * (FONT_W + FONT_S)), y, str[i], f_color, bg_color);
    }
}
